(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{33:function(e,t,n){},34:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(27),s=n.n(r),o=n(15),i=(n(33),n(12)),u=n(5),l=(n(34),n(17)),j=n(10),d=n(4),h=function(e){return Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)("h1",{children:"Chat App"}),e.children]})},b=n(18),p=Object(a.createContext)(null),O=function(e){var t=e.children;return b.a.apps.length||b.a.initializeApp({apiKey:"AIzaSyB7Vzr9T9fjvL8QWyR3Gko8ku3RJvWxMDQ",authDomain:"chatapp-2604c.firebaseapp.com",databaseURL:"https://chatapp-2604c-default-rtdb.europe-west1.firebasedatabase.app",projectId:"chatapp-2604c",storageBucket:"chatapp-2604c.appspot.com",messagingSenderId:"438557718193",appId:"1:438557718193:web:784da41c914dfa6b811490",measurementId:"G-H614FWZQB1"}),Object(d.jsx)(p.Provider,{value:b.a,children:t})},m=(n(22),function(e){var t=Object(a.useContext)(p),n=Object(a.useState)({email:"",password:"",error:""}),c=Object(i.a)(n,2),r=c[0],s=c[1],o=function(){t.auth().signInWithEmailAndPassword(r.email,r.password).then((function(t){e.history.push("/")})).catch((function(e){console.log(e),"auth/user-not-found"===e.code?t.auth().createUserWithEmailAndPassword(r.email,r.password).then((function(e){return console.log(e)})).catch((function(e){console.log(e),s((function(e){return Object(j.a)(Object(j.a)({},e),{},{error:"Error signing up."})}))})):s((function(e){return Object(j.a)(Object(j.a)({},e),{},{error:"Error logging in"})}))}))},u=function(e){var t=e.target,n=t.name,a=t.value;s((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(l.a)({},n,a))}))};return Object(d.jsxs)("div",{className:"login-container",children:[Object(d.jsx)(h,{}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s((function(e){return Object(j.a)(Object(j.a)({},e),{},{error:""})})),r.email&&r.password?o():s((function(e){return Object(j.a)(Object(j.a)({},e),{},{error:"Please fill in both field."})}))},children:[Object(d.jsx)("p",{children:"Please, log in into the app. Or make a new account by entering your email and password."}),Object(d.jsx)("input",{type:"text",name:"email",placeholder:"Please, enter your username",onChange:u,value:r.username}),Object(d.jsx)("input",{type:"password",name:"password",placeholder:"Please, enter your password.",onChange:u,value:r.password}),Object(d.jsx)("p",{className:"login-container__error",children:r.error}),Object(d.jsx)("button",{type:"submit",children:"Login"})]})]})}),f=function(e){var t=Object(a.useContext)(p),n=Object(a.useState)(""),c=Object(i.a)(n,2),r=c[0],s=c[1],o=function(){e.onSubmit(r),s("")};return Object(d.jsxs)("div",{className:"chat-container",children:[Object(d.jsx)(h,{children:Object(d.jsx)("button",{onClick:function(){t.auth().signOut()},children:"Logout"})}),Object(d.jsx)("div",{className:"message-container",children:e.messages.map((function(e){return Object(d.jsxs)("div",{className:"message",children:[Object(d.jsx)("p",{children:e.msg}),Object(d.jsx)("p",{children:e.author})]},e.id)}))}),Object(d.jsxs)("div",{className:"chat-input",children:[Object(d.jsx)("textarea",{placeholder:"Add your message",value:r,onChange:function(e){var t=e.target.value;s(t)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),o())}}),Object(d.jsx)("button",{onClick:o,children:"SEND"})]})]})},g=function(e){return Object(d.jsxs)("div",{className:"user-container",children:[Object(d.jsx)(h,{children:Object(d.jsx)(o.b,{to:"/",children:Object(d.jsx)("button",{children:"Back To Chat"})})}),Object(d.jsxs)("h1",{children:["Hello from User Container!",e.match.params.id]})]})};n(41);var x=Object(u.e)((function(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(null),o=Object(i.a)(s,2),l=o[0],j=o[1],h=Object(a.useContext)(p),b=function(e){var t={msg:e,author:l.email,user_id:l.uid,timestamp:Date.now()};h.database().ref("messages/").push(t)};return Object(a.useEffect)((function(){h.auth().onAuthStateChanged((function(t){t?(j(t),console.log(t)):e.history.push("/login")})),h.database().ref("/messages").on("value",(function(e){!function(e){var t=Object.keys(e.val()).map((function(t){var n=e.val()[t];return n.id=t,n}));r(t)}(e)}))}),[]),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(u.a,{path:"/login",component:m}),Object(d.jsx)(u.a,{exact:!0,path:"/",render:function(){return Object(d.jsx)(f,{onSubmit:b,messages:c})}}),Object(d.jsx)(u.a,{path:"/users/:id",component:g})]})}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(d.jsx)(O,{children:Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(o.a,{children:Object(d.jsx)(x,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),v()}},[[45,1,2]]]);
//# sourceMappingURL=main.40494413.chunk.js.map